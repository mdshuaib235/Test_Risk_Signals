<!DOCTYPE html>
<html>
<head>
    <title>AI Media Authenticity Verification</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
    background: radial-gradient(circle at top, #0f2027, #0d1117);
    font-family: "Inter", sans-serif;
    color:#e6edf3;
}

.card{
    background:#161b22;
    border:1px solid #30363d;
    border-radius:16px;
}

.form-control, .form-select{
    background:#0d1117;
    border:1px solid #30363d;
    color:#e6edf3;
}

.form-control:focus, .form-select:focus{
    background:#0d1117;
    color:#fff;
    border-color:#00f0ff;
    box-shadow:0 0 0 0.2rem rgba(0,240,255,0.2);
}

.btn-ai{
    background:linear-gradient(90deg,#00f0ff,#00d084);
    border:none;
    font-weight:600;
    color:#000;
}

.btn-ai:hover{
    opacity:0.9;
}

.preview-box{
    margin-top:15px;
    text-align:center;
}

.preview-box img,
.preview-box video,
.preview-box audio{
    max-width:100%;
    border-radius:12px;
    margin-top:10px;
}

.loader{
    display:none;
}

.spinner-border{
    width:1.2rem;
    height:1.2rem;
}

.error-msg{
    color:#ff4d4f;
    font-size:14px;
}

input::placeholder{
  color: #00d084;
  opacity: 1; /* Firefox */
}

::-ms-input-placeholder { /* Edge 12 -18 */
  color: #00d084;
}

</style>
</head>

<body>

<div class="container py-5" style="color: white">

<div class="card shadow-lg p-4" style="color: white">

    <h3 class="text-center mb-4" style="color: white">
        ðŸ¤– AI Media Authenticity Verification
    </h3>

    {% if error %}
        <div class="alert alert-danger">
            {{ error }}
        </div>
    {% endif %}

    <form id="uploadForm" method="post" enctype="multipart/form-data" novalidate>
        {% csrf_token %}

        <div class="mb-3" style="color: white">
            <label class="form-label">Media Type</label>
            <select name="media_type" id="mediaType" class="form-select" required>
                <option value="">Select Media Type</option>
                <option value="image">Image</option>
                <option value="video">Video</option>
                <option value="audio">Audio</option>
            </select>
        </div>

        <div class="mb-3" style="color: white">
            <label class="form-label">Upload Media</label>
            <input type="file" name="media_file" id="mediaFile" class="form-control">
        </div>

        <div class="text-center my-2 text-muted">OR</div>

        <div class="mb-3" style="color: white">
            <label class="form-label">Media URL</label>
            <input type="url" name="media_url" id="mediaUrl" style="    background-color: #a0b6b6;"
                   class="form-control"
                   placeholder="https://example.com/media.mp4">
        </div>

        <div class="error-msg" id="errorBox" style="color: white"></div>

        <div class="preview-box" id="previewBox" style="color: white"></div>

        <button type="submit" id="submitBtn"
                class="btn btn-ai w-100 mt-3">
            Analyze Media
        </button>

        <div class="loader text-center mt-3" id="loader">
            <div class="spinner-border text-info"></div>
            <div class="mt-2">AI analyzing media...</div>
        </div>

    </form>

</div>
</div>

<script>

const form = document.getElementById("uploadForm");
const fileInput = document.getElementById("mediaFile");
const urlInput = document.getElementById("mediaUrl");
const typeSelect = document.getElementById("mediaType");
const previewBox = document.getElementById("previewBox");
const errorBox = document.getElementById("errorBox");
const loader = document.getElementById("loader");
const submitBtn = document.getElementById("submitBtn");

const MAX_SIZE_MB = 50;

fileInput.addEventListener("change", function(){
    previewBox.innerHTML = "";
    errorBox.innerText = "";

    const file = this.files[0];
    if(!file) return;

    const sizeMB = file.size / (1024*1024);
    if(sizeMB > MAX_SIZE_MB){
        errorBox.innerText = "File exceeds 50MB limit.";
        fileInput.value = "";
        return;
    }

    const type = typeSelect.value;

    if(type === "image"){
        const img = document.createElement("img");
        img.src = URL.createObjectURL(file);
        previewBox.appendChild(img);
    }
    else if(type === "video"){
        const vid = document.createElement("video");
        vid.src = URL.createObjectURL(file);
        vid.controls = true;
        previewBox.appendChild(vid);
    }
    else if(type === "audio"){
        const aud = document.createElement("audio");
        aud.src = URL.createObjectURL(file);
        aud.controls = true;
        previewBox.appendChild(aud);
    }
});

form.addEventListener("submit", function(e){

    errorBox.innerText = "";

    const file = fileInput.files.length;
    const url = urlInput.value.trim();
    const type = typeSelect.value;

    if(!type){
        e.preventDefault();
        errorBox.innerText = "Please select media type.";
        return;
    }

    if(!file && !url){
        e.preventDefault();
        errorBox.innerText = "Provide either file or URL.";
        return;
    }

    if(file && url){
        e.preventDefault();
        errorBox.innerText = "Provide only one: file OR URL.";
        return;
    }

    submitBtn.disabled = true;
    loader.style.display = "block";
});

</script>

</body>
</html>